<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script>
        // 创建link元素并设置正确的CSS路径
        const linkElem = document.createElement('link');
        linkElem.rel = 'stylesheet';
        linkElem.href = chrome.runtime.getURL('dialog.css');
        document.head.appendChild(linkElem);
    </script>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h3>DEEPHEY.AI</DEEPHEY></h3>
            <div class="header-actions">
                <button id="clear-messages" title="清空消息"><svg t="1740486172067" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11573" width="200" height="200"><path d="M479.3 863.6L899.9 443c37.4-37.4 37.4-98.3 0-135.8L716.7 124.1C698.5 106 674.4 96 648.7 96c-25.8 0-50.4 10.8-68.6 29l-455 455c-18.2 18.2-29 42.8-29 68.6 0 25.7 9.9 49.9 28.1 68l183.1 183.2c18.1 18.1 42.2 28.1 67.9 28.1 3 0 5.9-0.1 8.8-0.4v0.1h512c17.7 0 32-14.3 32-32s-14.3-32-32-32H479.3z m-126.8-9L169.4 671.5c-6-6-9.4-14.1-9.4-22.6 0-8.5 3.3-16.6 9.4-22.6l104.9-104.9 228.4 228.4-104.9 104.8c-6 6-14.1 9.4-22.6 9.4-8.6 0-16.6-3.3-22.7-9.4z" p-id="11574" fill="#ffffff"></path></svg>
                </button>
                <button id="close-chat">✕</button>
            </div>
        </div>
        <div class="views-container">
            <!-- 添加确认对话框 -->
            <div id="confirm-dialog" class="confirm-dialog">
                <div class="confirm-dialog-content">
                    <p>确定要清空所有对话记录吗？</p>
                    <div class="confirm-dialog-actions">
                        <button id="confirm-yes" class="confirm-button confirm-yes">确定</button>
                        <button id="confirm-no" class="confirm-button confirm-no">取消</button>
                    </div>
                </div>
            </div>
            
            <!-- 介绍页面 -->
            <!-- 修改 introduction-view 部分 -->
            <div id="introduction-view">
                <!-- 登录视图 -->
                <div id="login-view" style="display: none;">
                    <div class="intro-content">
                        <h2>登录 DEEPHEY.AI</h2>
                        <div class="login-content" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);">
                            <!-- Google登录按钮 -->
                            <button class="google-login-btn">
                                <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
                                    <path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12
                                c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24
                                c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"/>
                                    <path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657
                                C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"/>
                                    <path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36
                                c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"/>
                                    <path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571
                                c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"/>
                                </svg>
                                <span>使用 Google 账号登录</span>
                            </button>
                            <div class="login-divider">
                                <span>或</span>
                            </div>
                            <!-- 邮箱登录表单 -->
                            <div class="email-login-form">
                                <div class="form-group">
                                    <label for="email">邮箱地址</label>
                                    <input type="email" id="email" placeholder="请输入邮箱地址">
                                    <span class="error-message" id="email-error"></span>
                                </div>
                                <div class="form-group verification-code">
                                    <label for="verification-code">验证码</label>
                                    <div class="verification-code-container">
                                        <input type="text" id="verification-code" placeholder="请输入验证码">
                                        <button class="send-code-btn">发送验证码</button>
                                    </div>
                                    <span class="error-message" id="code-error"></span>
                                </div>
                                <button class="login-submit-btn">登录</button>
                                <button id="back-to-intro" class="back-button" style="margin-top: 16px; width: 100%;">返回</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="intro-content">
                    <div class="intro-content">
                        <h2>欢迎使用 AI 文本助手</h2>
                        <div class="auth-buttons-container">
                            <button id="loginButton" class="auth-button login-btn">登录</button>
                            <button class="auth-button register-btn">注册</button>
                        </div>
                        <div class="feature-section">
                            <h3>📝 文本处理</h3>
                            <ul>
                                <li>智能分析和总结长文本</li>
                                <li>提取关键信息和重点</li>
                                <li>优化文本格式和结构</li>
                            </ul>
                        </div>
                        <div class="feature-section">
                            <h3>🔍 内容增强</h3>
                            <ul>
                                <li>智能扩展和改写文本</li>
                                <li>多语言翻译</li>
                                <li>语法和拼写检查</li>
                            </ul>
                        </div>
                        <div class="feature-section">
                            <h3>💡 创意助手</h3>
                            <ul>
                                <li>提供写作建议和灵感</li>
                                <li>生成相关内容</li>
                                <li>改进表达方式</li>
                            </ul>
                        </div>
                        <div class="feature-section">
                            <h3>🚀 使用方法</h3>
                            <ul>
                                <li>选择网页中的任意文本</li>
                                <li>点击右键菜单中的"AI 助手"</li>
                                <li>在对话框中输入你的需求</li>
                                <li>直接在此处提问，开始对话</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 聊天界面 -->
            <div id="chat-view">
                <div class="chat-messages" id="chat-messages">
                    <!-- Messages will be added here -->
                </div>
            </div>

            <!-- 共用的输入区域 -->
            <div class="chat-input">
                <div class="input-area">
                    <div class="input-container">
                        <textarea id="user-input" placeholder="输入消息，开始对话..."></textarea>
                        <button id="send-message">
                            <svg aria-hidden="true" focusable="false" class="octicon octicon-paper-airplane" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display: inline-block; user-select: none; vertical-align: text-bottom; overflow: visible;"><path d="M.989 8 .064 2.68a1.342 1.342 0 0 1 1.85-1.462l13.402 5.744a1.13 1.13 0 0 1 0 2.076L1.913 14.782a1.343 1.343 0 0 1-1.85-1.463L.99 8Zm.603-5.288L2.38 7.25h4.87a.75.75 0 0 1 0 1.5H2.38l-.788 4.538L13.929 8Z"></path></svg>
                        </button>
                    </div>
                    <div class="message-controls">
                        <div class="message-count">
                            <span>(0/100000)</span>
                        </div>
                        <div class="message-actions-right">
                            <button class="icon-button" title="反馈">
                                <svg viewBox="0 0 24 24" width="16" height="16">
                                    <path fill="currentColor" d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"/>
                                </svg>
                            </button>
                            <button class="icon-button" title="点赞">
                                <svg viewBox="0 0 24 24" width="16" height="16">
                                    <path fill="currentColor" d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/>
                                </svg>
                            </button>
                            <button class="icon-button" title="设置">
                                <svg viewBox="0 0 24 24" width="16" height="16">
                                    <path fill="currentColor" d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                                </svg>
                            </button>
                            <span class="sign-up-text">SIGN UP</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 在 dialog.html 中添加用户中心视图 -->
            <div id="user-center-view" style="display: none;">
                <div class="user-center-content">
                    <div class="user-info-section">
                        <div class="user-avatar">
                            <img src="assets/default-avatar.png" alt="用户头像" id="user-avatar">
                        </div>
                        <div class="user-details">
                            <h3 id="user-email">yuguoming@yeah.net</h3>
                            <span class="user-status">已登录</span>
                        </div>
                    </div>
                    
                    <div class="user-stats-section">
                        <div class="stat-item">
                            <h4>今日剩余次数</h4>
                            <span id="remaining-count">50</span>
                        </div>
                        <div class="stat-item">
                            <h4>会员状态</h4>
                            <span id="member-status">普通用户</span>
                        </div>
                    </div>
                    
                    <div class="user-actions">
                        <button id="upgrade-btn" class="action-btn">升级会员</button>
                        <button id="settings-btn" class="action-btn">设置</button>
                        <button id="logout-btn" class="action-btn">退出登录</button>
                    </div>
                </div>
            </div>




        </div>
    </div>

    <script src="dialog.js"></script>
</body>
</html>